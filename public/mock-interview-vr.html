<!-- Simple A-Frame VR Interview Room Example -->
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <title>Mock Interview VR Room</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="margin:0;">
        <!-- Disclaimer Banner -->
        <div style="position:fixed;top:0;left:0;width:100vw;background:rgba(255,255,255,0.97);color:#7b2ff2;font-weight:600;font-size:1.08rem;padding:12px 0;text-align:center;z-index:200;box-shadow:0 2px 8px #7b2ff222;">
          Disclaimer: This is only a mock interview experience. Ai Wilding is not currently hiring and this simulation does not constitute a job offer or application.
        </div>
    <style>
      body {
        margin: 0;
        min-height: 100vh;
        background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80') no-repeat center center fixed;
        background-size: cover;
      }
      #zoom-overlay {
        /* Keep overlay readable over background */
        backdrop-filter: blur(2px);
      }
    </style>
    <!-- Centered Mr. Nanny and Interview UI -->
    <div id="interview-room" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100;display:flex;justify-content:center;align-items:center;">
      <div style="background:rgba(0,0,0,0.85);border-radius:16px;padding:24px 40px;box-shadow:0 2px 16px #23252655;display:flex;flex-direction:column;align-items:center;min-width:340px;max-width:480px;">
        <div style="color:#7b2ff2;font-size:1.3rem;font-weight:700;margin-bottom:18px;">Hello World</div>
        <img src="/Mr%20Nanny.png" alt="Bot Avatar" style="width:72px;height:72px;border-radius:50%;border:2px solid #ffd700;box-shadow:0 2px 8px #ffd70044;margin-bottom:12px;" />
        <span style="color:#ffd700;font-size:1.3rem;font-weight:700;margin-bottom:18px;">Mr. Nanny (AI Interviewer)</span>
        <div id="bot-chat-bubble" style="background:#fffbe6;color:#232526;border-radius:12px;padding:14px 22px;font-size:1.12rem;box-shadow:0 2px 8px #ffd70022;margin-bottom:16px;min-height:48px;max-width:340px;text-align:left;">Welcome to your live mock interview! Ready to begin?</div>
        <div style="display:flex;gap:14px;justify-content:center;margin-bottom:12px;">
          <button id="join-btn" style="background:#ffd700;color:#232526;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #ffd70044;cursor:pointer;">Join Interview</button>
          <button id="end-btn" style="background:#7b2ff2;color:#fff;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;">End</button>
        </div>
        <div id="answer-bar" style="width:100%;display:flex;gap:8px;align-items:center;margin-bottom:8px;">
          <input id="answer-input" type="text" placeholder="Type your answer here..." style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:220px;" />
          <button id="submit-btn" style="background:#7b2ff2;color:#fff;font-weight:700;border-radius:8px;padding:8px 16px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;">Submit</button>
        </div>
        <span id="answer-feedback" style="color:#ffd700;font-size:1rem;margin-top:4px;"></span>
      </div>
      <!-- Sidebar for programmable questions -->
      <div id="question-sidebar" style="background:rgba(255,255,255,0.92);border-radius:16px;padding:18px 22px;box-shadow:0 2px 12px #23252622;min-width:260px;max-width:320px;margin-left:32px;display:flex;flex-direction:column;align-items:flex-start;">
        <h3 style="color:#7b2ff2;margin-bottom:10px;font-size:1.1rem;">Interview Questions</h3>
        <ul id="question-list" style="list-style:none;padding:0;margin:0 0 10px 0;font-size:1rem;color:#232526;"></ul>
        <textarea id="question-editor" style="width:100%;height:60px;border-radius:8px;border:1px solid #7b2ff2;margin-bottom:8px;padding:6px 8px;font-size:1rem;" placeholder="Add or edit questions, one per line..."></textarea>
        <button id="save-questions-btn" style="background:#ffd700;color:#232526;font-weight:700;border-radius:8px;padding:6px 14px;font-size:1rem;border:none;box-shadow:0 2px 8px #ffd70044;cursor:pointer;">Save Questions</button>
      </div>
    </div>
      <!-- Command Input Bar -->
        <!-- User Answer Input Bar -->
        <div id="answer-bar" style="position:fixed;bottom:70px;left:50%;transform:translateX(-50%);z-index:10;background:rgba(255,255,255,0.95);border-radius:8px;padding:8px 16px;box-shadow:0 2px 8px #7b2ff222;display:flex;gap:8px;align-items:center;">
          <input id="answer-input" type="text" placeholder="Type your answer here..." style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:320px;" />
          <button onclick="submitAnswer()">Submit</button>
          <span id="answer-feedback" style="color:#7b2ff2;font-size:1rem;margin-left:12px;"></span>
        </div>
      <div id="command-bar" style="position:fixed;bottom:24px;left:50%;transform:translateX(-50%);z-index:10;background:rgba(255,255,255,0.95);border-radius:8px;padding:8px 16px;box-shadow:0 2px 8px #7b2ff222;display:flex;gap:8px;align-items:center;">
        <input id="command-input" type="text" placeholder="Type a command (e.g. start, next, training, help)" style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:260px;" />
        <button onclick="handleCommand()">Send</button>
        <span id="command-feedback" style="color:#7b2ff2;font-size:1rem;margin-left:12px;"></span>
      </div>

  </body>
  <!-- Move all scripts here for clarity and to prevent code from showing in the scene -->
  <script>
    // Command bar logic
    function handleCommand() {
      const input = document.getElementById('command-input');
      const feedback = document.getElementById('command-feedback');
      if (!input || !feedback) return;
      const cmd = input.value.trim().toLowerCase();
      input.value = '';
      feedback.textContent = '';
      if (!cmd) return;
      if (cmd === 'start' || cmd === 'start interview' || cmd === 'yes' || cmd === 'ready') {
        window.startInterview();
        feedback.textContent = 'Interview started!';
      } else if (cmd === 'next' || cmd === 'next question') {
        window.nextQuestion();
        feedback.textContent = 'Next question.';
      } else if (cmd === 'training' || cmd === 'need training') {
        window.showTraining();
        feedback.textContent = 'Training tip shown.';
      } else if (cmd === 'help') {
        feedback.textContent = 'Commands: start, next, training, help';
      } else {
        feedback.textContent = 'Unknown command.';
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      const input = document.getElementById('command-input');
      if (input) {
        input.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') handleCommand();
        });
      }
    });
  </script>
  <script>
    // Fill-in-the-blank interview logic with programmable questions
    document.addEventListener('DOMContentLoaded', function() {
      const joinBtn = document.getElementById('join-btn');
      const endBtn = document.getElementById('end-btn');
      const botBubble = document.getElementById('bot-chat-bubble');
      const answerInput = document.getElementById('answer-input');
      const submitBtn = document.getElementById('submit-btn');
      const answerFeedback = document.getElementById('answer-feedback');
      const questionList = document.getElementById('question-list');
      const questionEditor = document.getElementById('question-editor');
      const saveQuestionsBtn = document.getElementById('save-questions-btn');
      let interviewStarted = false;
      let interviewStep = 0;
      let userAnswers = [];
      // Default questions
      let questions = [
        "What interests you about working at Ai Wilding?",
        "Describe a time you solved a problem using AI or technology.",
        "How do you stay current with AI trends and tools?",
        "What strengths would you bring to our team at Ai Wilding?",
        "How do you handle feedback and learning in a fast-paced environment?",
        "Why do you think you are a good fit for our company culture?",
        "Do you have any questions about Ai Wilding or the role?"
      ];
      function renderQuestionList() {
        questionList.innerHTML = '';
        questions.forEach((q, idx) => {
          const li = document.createElement('li');
          li.textContent = `${idx+1}. ${q}`;
          questionList.appendChild(li);
        });
        questionEditor.value = questions.join('\n');
      }
      renderQuestionList();
      saveQuestionsBtn.onclick = function() {
        const lines = questionEditor.value.split(/\r?\n/).map(l => l.trim()).filter(l => l);
        if (lines.length) {
          questions = lines;
          renderQuestionList();
        }
      };
      function botSay(msg) {
        botBubble.textContent = msg;
        if ('speechSynthesis' in window) {
          const utter = new window.SpeechSynthesisUtterance(msg);
          utter.rate = 1.05;
          utter.pitch = 1.1;
          window.speechSynthesis.speak(utter);
        }
      }
      if (joinBtn) joinBtn.onclick = function() {
        interviewStarted = true;
        interviewStep = 0;
        userAnswers = [];
        botSay(questions[interviewStep]);
        answerInput.value = '';
        answerFeedback.textContent = '';
      };
      if (endBtn) endBtn.onclick = function() {
        interviewStarted = false;
        botSay("Interview ended. Thank you for participating!");
        answerFeedback.textContent = '';
      };
      function submitAnswer() {
        if (!interviewStarted) {
          answerFeedback.textContent = 'Please start the interview.';
          return;
        }
        const answer = answerInput.value.trim();
        if (!answer) {
          answerFeedback.textContent = 'Please type an answer.';
          return;
        }
        userAnswers[interviewStep] = answer;
        // Simple scoring: +1 for each answer that contains a relevant keyword
        const keywords = [
          'ai', 'technology', 'team', 'feedback', 'learn', 'culture', 'current', 'trend', 'strength', 'problem', 'solution', 'fit', 'role', 'company', 'wilding'
        ];
        let score = 0;
        const answerLower = answer.toLowerCase();
        keywords.forEach(kw => {
          if (answerLower.includes(kw)) score++;
        });
        if (!window.answerScores) window.answerScores = [];
        window.answerScores[interviewStep] = score;
        answerFeedback.textContent = 'Answer saved.';
        answerInput.value = '';
        interviewStep++;
        if (interviewStep < questions.length) {
          setTimeout(() => {
            botSay(questions[interviewStep]);
            answerFeedback.textContent = '';
          }, 1200);
        } else {
          setTimeout(() => {
            // Calculate total score
            const totalScore = window.answerScores.reduce((a,b) => a+b, 0);
            const maxScore = questions.length * keywords.length;
            const percent = Math.round((totalScore / (questions.length * 3)) * 100); // 3+ keywords per answer is ideal
            let outcome = '';
            let guidance = '';
            let showFlashcardBtn = false;
            if (percent >= 80) {
              outcome = 'Excellent! You are well prepared for Ai Wilding.';
            } else if (percent >= 60) {
              outcome = 'Decent, but review your answers and try again for a higher score.';
            } else {
              outcome = 'Needs improvement. Practice more detailed and specific answers.';
              showFlashcardBtn = true;
              // Find missed keywords for guidance
              let missed = [];
              userAnswers.forEach((ans, idx) => {
                const ansLower = (ans || '').toLowerCase();
                keywords.forEach(kw => {
                  if (!ansLower.includes(kw) && !missed.includes(kw)) missed.push(kw);
                });
              });
              if (missed.length) {
                guidance = '\n\nInterview Guidance: Try to address these areas in your answers: ' + missed.join(', ') + '.\nFor help, visit our Resume Wizard, Training, and Resources tabs.';
              }
            }
            botSay(`Interview complete!\nScore: ${percent}%\n${outcome}${guidance}`);
            answerFeedback.textContent = `Final Score: ${percent}%`;
            // Show flashcard training button if needed
            if (showFlashcardBtn) {
              setTimeout(() => {
                let fcBtn = document.getElementById('flashcard-btn');
                if (!fcBtn) {
                  fcBtn = document.createElement('button');
                  fcBtn.id = 'flashcard-btn';
                  fcBtn.textContent = 'Start Flashcard Training with Mr. Nanny';
                  fcBtn.style.background = '#ffd700';
                  fcBtn.style.color = '#232526';
                  fcBtn.style.fontWeight = '700';
                  fcBtn.style.borderRadius = '8px';
                  fcBtn.style.padding = '10px 18px';
                  fcBtn.style.fontSize = '1rem';
                  fcBtn.style.border = 'none';
                  fcBtn.style.boxShadow = '0 2px 8px #ffd70044';
                  fcBtn.style.marginTop = '18px';
                  fcBtn.style.cursor = 'pointer';
                  fcBtn.onclick = startFlashcardTraining;
                  botBubble.parentNode.appendChild(fcBtn);
                }
              }, 1400);
            }
              // Flashcard training logic
              function startFlashcardTraining() {
                const missedKeywords = [];
                const keywords = [
                  'ai', 'technology', 'team', 'feedback', 'learn', 'culture', 'current', 'trend', 'strength', 'problem', 'solution', 'fit', 'role', 'company', 'wilding'
                ];
                // Flashcard content for each keyword
                const flashcardContent = {
                  ai: {
                    concept: 'Artificial Intelligence (AI)',
                    why: 'AI is central to Ai Wilding. Showing knowledge or interest in AI demonstrates you understand our mission and can contribute to our projects.',
                    sample: 'I am passionate about AI and have used it to automate tasks and solve real-world problems.'
                  },
                  technology: {
                    concept: 'Technology',
                    why: 'Tech skills show you can adapt and innovate, which is vital in a fast-moving company.',
                    sample: 'I stay updated on new technologies and use them to improve team efficiency.'
                  },
                  team: {
                    concept: 'Teamwork',
                    why: 'Collaboration is key at Ai Wilding. Teamwork skills show you can work well with others.',
                    sample: 'I enjoy collaborating and have led teams to successful project outcomes.'
                  },
                  feedback: {
                    concept: 'Feedback',
                    why: 'Being open to feedback means you can grow and improve, which is valued here.',
                    sample: 'I actively seek feedback and use it to improve my work.'
                  },
                  learn: {
                    concept: 'Learning',
                    why: 'Continuous learning keeps you relevant and valuable in tech roles.',
                    sample: 'I regularly take online courses to expand my skills.'
                  },
                  culture: {
                    concept: 'Company Culture',
                    why: 'Fitting into the culture helps you thrive and contribute positively.',
                    sample: 'I value inclusivity and enjoy working in diverse environments.'
                  },
                  current: {
                    concept: 'Staying Current',
                    why: 'Being up-to-date with trends shows you are proactive and engaged.',
                    sample: 'I follow AI news and attend webinars to stay current.'
                  },
                  trend: {
                    concept: 'Industry Trends',
                    why: 'Awareness of trends helps you anticipate changes and innovate.',
                    sample: 'I research emerging trends to inform my work.'
                  },
                  strength: {
                    concept: 'Strengths',
                    why: 'Knowing your strengths helps you contribute effectively.',
                    sample: 'My strengths are problem-solving and communication.'
                  },
                  problem: {
                    concept: 'Problem Solving',
                    why: 'Solving problems is a core skill for any role at Ai Wilding.',
                    sample: 'I approach problems methodically and find creative solutions.'
                  },
                  solution: {
                    concept: 'Solutions',
                    why: 'Providing solutions shows initiative and value.',
                    sample: 'I proposed a solution that reduced costs by 20%.'
                  },
                  fit: {
                    concept: 'Role Fit',
                    why: 'Explaining why you fit the role shows self-awareness and preparation.',
                    sample: 'My experience aligns well with the requirements of this role.'
                  },
                  role: {
                    concept: 'Role',
                    why: 'Understanding the role helps you tailor your answers and show interest.',
                    sample: 'I am excited about the responsibilities of this position.'
                  },
                  company: {
                    concept: 'Company Knowledge',
                    why: 'Knowing about Ai Wilding shows genuine interest.',
                    sample: 'I admire Ai Wilding’s commitment to innovation.'
                  },
                  wilding: {
                    concept: 'Ai Wilding',
                    why: 'Mentioning the company name personalizes your answers and shows you did your research.',
                    sample: 'I want to contribute to Ai Wilding’s mission and growth.'
                  },
                  metrics: {
                    concept: 'Using measurable results to strengthen your answers.',
                    why: 'Interviewers want to hear numbers because they prove impact. Metrics show scale, efficiency, or improvement.',
                    sample: 'I increased customer satisfaction by 18% by redesigning the support workflow.',
                    practice: 'Describe a time you improved a process. Include at least one measurable result.'
                  },
                  "conflict resolution": {
                    concept: 'Handling disagreements professionally and calmly.',
                    why: 'Employers want to know you can navigate tension without escalating it.',
                    sample: 'I approached the teammate privately, listened to their concerns, and we agreed on a shared workflow.',
                    practice: 'Tell me about a conflict you resolved at work. What steps did you take?'
                  },
                  "leadership example": {
                    concept: 'Demonstrating initiative, guidance, or influence.',
                    why: 'Leadership isn’t about titles — it’s about taking responsibility and moving people toward a goal.',
                    sample: 'I led a 4‑person team to deliver a project two weeks early by organizing daily check‑ins.',
                    practice: 'Describe a time you led a project or group. What was the outcome?'
                  },
                  "STAR method": {
                    concept: 'A structured way to answer behavioral questions.',
                    why: 'STAR stands for Situation, Task, Action, Result. It keeps your answers clear and complete.',
                    sample: 'Situation: Our sales were dropping. Task: I needed to improve outreach. Action: I built a new email sequence. Result: Sales rose 22% in 3 months.',
                    practice: "Answer this question using STAR: 'Tell me about a challenge you overcame.'"
                  }
                };
                userAnswers.forEach((ans, idx) => {
                  const ansLower = (ans || '').toLowerCase();
                  keywords.forEach(kw => {
                    if (!ansLower.includes(kw) && !missedKeywords.includes(kw)) missedKeywords.push(kw);
                  });
                });
                let flashcards = missedKeywords.length ? missedKeywords.slice(0, 15) : keywords.slice(0, 15);
                let fcStep = 0;
                function showFlashcard() {
                  if (fcStep < flashcards.length) {
                    const kw = flashcards[fcStep];
                    const card = flashcardContent[kw];
                    botBubble.innerHTML = `<strong>Flashcard: ${kw.charAt(0).toUpperCase() + kw.slice(1)}</strong><br/><em>Concept:</em> ${card.concept}<br/><em>Why it matters:</em> ${card.why || card.explanation}<br/><em>Sample strong answer:</em> <span style='color:#7b2ff2;'>${card.sample || card.example_answer}</span><br/><em>Practice question:</em> <span style='color:#232526;'>${card.practice || card.practice_question || ''}</span><br/><span style='font-size:0.95rem;color:#888;'>Click here for next card</span>`;
                  } else {
                    botBubble.innerHTML = `<strong>Flashcard training complete!</strong><br/>You are ready to try the interview again.<br/><button id='retake-btn' style='background:#7b2ff2;color:#fff;font-weight:700;border-radius:8px;padding:8px 16px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;margin-top:12px;'>Retake Interview</button>`;
                    let fcBtn = document.getElementById('flashcard-btn');
                    if (fcBtn) fcBtn.remove();
                    const retakeBtn = document.getElementById('retake-btn');
                    if (retakeBtn) {
                      retakeBtn.onclick = function() {
                        interviewStep = 0;
                        userAnswers = [];
                        window.answerScores = [];
                        botBubble.innerHTML = '';
                        botSay(questions[interviewStep]);
                        answerInput.value = '';
                        answerFeedback.textContent = '';
                      };
                    }
                  }
                }
                showFlashcard();
                botBubble.onclick = function() {
                  fcStep++;
                  showFlashcard();
                };
                let fcBtn = document.getElementById('flashcard-btn');
                if (fcBtn) fcBtn.remove();
              }
          }, 1200);
        }
      }
      submitBtn.onclick = submitAnswer;
      answerInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') submitAnswer();
      });
    });
  </script>
</html>
