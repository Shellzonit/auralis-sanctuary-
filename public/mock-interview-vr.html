<!-- Simple A-Frame VR Interview Room Example -->
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <title>Mock Interview VR Room</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="margin:0;">
        <!-- Zoom-style Video Chat Overlay -->
        <div id="zoom-overlay" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100;pointer-events:none;">
          <div style="position:absolute;top:24px;right:24px;background:rgba(0,0,0,0.85);border-radius:16px;padding:18px 32px;box-shadow:0 2px 16px #23252655;display:flex;flex-direction:column;align-items:center;min-width:320px;max-width:420px;">
            <div style="display:flex;align-items:center;gap:18px;margin-bottom:12px;">
              <img src="/Mr%20Nanny.png" alt="Bot Avatar" style="width:56px;height:56px;border-radius:50%;border:2px solid #ffd700;box-shadow:0 2px 8px #ffd70044;" />
              <span style="color:#ffd700;font-size:1.2rem;font-weight:700;">Mr. Nanny (AI Interviewer)</span>
            </div>
            <div id="bot-chat-bubble" style="background:#fffbe6;color:#232526;border-radius:12px;padding:12px 18px;font-size:1.08rem;box-shadow:0 2px 8px #ffd70022;margin-bottom:10px;min-height:48px;max-width:340px;text-align:left;">Welcome to your live mock interview! Ready to begin?</div>
            <div style="display:flex;gap:12px;justify-content:center;margin-top:8px;">
              <button id="join-btn" style="background:#ffd700;color:#232526;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #ffd70044;cursor:pointer;pointer-events:auto;">Join Interview</button>
              <button id="mute-btn" style="background:#ece9fc;color:#232526;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;pointer-events:auto;">Mute</button>
              <button id="end-btn" style="background:#7b2ff2;color:#fff;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;pointer-events:auto;">End Call</button>
            </div>
          </div>
        </div>
    <a-scene>
      <a-entity cursor="rayOrigin: mouse"></a-entity>
      <!-- Office Floor -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="8" height="8" color="#e6e2d3"></a-plane>
      <!-- Office Walls -->
      <a-box position="0 2 -4" depth="0.2" height="4" width="8" color="#d1cfcf"></a-box> <!-- Back wall -->
      <a-box position="0 2 4" depth="0.2" height="4" width="8" color="#d1cfcf"></a-box> <!-- Front wall -->
      <a-box position="-4 2 0" depth="8" height="4" width="0.2" color="#d1cfcf"></a-box> <!-- Left wall -->
      <a-box position="4 2 0" depth="8" height="4" width="0.2" color="#d1cfcf"></a-box> <!-- Right wall -->
      <!-- Windows on back wall -->
      <a-box position="-2 2.5 -3.9" depth="0.05" height="1.2" width="2" color="#b3e5fc" opacity="0.7"></a-box>
      <a-box position="2 2.5 -3.9" depth="0.05" height="1.2" width="2" color="#b3e5fc" opacity="0.7"></a-box>
      <!-- Door on front wall -->
      <a-box position="0 1 -3.99" depth="0.05" height="2" width="1" color="#a1887f"></a-box>
      <!-- Bookshelf -->
      <a-box position="-3.5 1.2 2.5" depth="0.3" height="2.2" width="1" color="#8d6e63"></a-box>
      <a-box position="-3.5 2.1 2.5" depth="0.32" height="0.2" width="1.02" color="#fffde7"></a-box>
      <a-box position="-3.5 1.7 2.5" depth="0.32" height="0.2" width="1.02" color="#fffde7"></a-box>
      <a-box position="-3.5 1.3 2.5" depth="0.32" height="0.2" width="1.02" color="#fffde7"></a-box>
      <!-- Desk -->
      <a-box position="0 0.75 -1.5" depth="1" height="0.25" width="2" color="#bba6f7"></a-box>
      <!-- Interviewer Chairs -->
      <a-box position="-1.2 0.4 -2.2" depth="0.8" height="0.5" width="0.8" color="#ffd700"></a-box>
      <a-box position="0 0.4 -2.2" depth="0.8" height="0.5" width="0.8" color="#bba6f7"></a-box>
      <a-box position="1.2 0.4 -2.2" depth="0.8" height="0.5" width="0.8" color="#7b2ff2"></a-box>
      <!-- User Chair -->
      <a-box position="0 0.25 1.5" depth="1" height="0.5" width="1" color="#7b2ff2"></a-box>
      <!-- Interviewer Avatars -->
      <a-sphere id="mrnanny" position="-1.2 1.2 -2.5" radius="0.5" color="#ffd700"></a-sphere>
      <a-text value="Mr. Nanny" position="-1.2 2 -2.5" align="center" color="#232526"></a-text>
      <a-sphere position="0 1.2 -2.5" radius="0.5" color="#bba6f7"></a-sphere>
      <a-text value="Ms. AI" position="0 2 -2.5" align="center" color="#232526"></a-text>
      <a-sphere position="1.2 1.2 -2.5" radius="0.5" color="#7b2ff2"></a-sphere>
      <a-text value="Dr. Tech" position="1.2 2 -2.5" align="center" color="#232526"></a-text>
      <!-- Floating Question Buttons and Controls -->
      <a-box id="record-btn" position="-1.5 0.4 1" depth="0.2" height="0.4" width="1.2" color="#7b2ff2" class="clickable">
        <a-text value="Record Answer" align="center" color="#fff" position="0 0 0.15" width="2"></a-text>
      </a-box>
      <a-box id="play-btn" position="1.5 0.4 1" depth="0.2" height="0.4" width="1.2" color="#bba6f7" class="clickable">
        <a-text value="Play Answer" align="center" color="#232526" position="0 0 0.15" width="2"></a-text>
      </a-box>
      <a-text id="rec-status" value="" align="center" color="#ff0000" position="0 0.1 1" width="4"></a-text>
      <a-box id="training-btn" position="0 0.7 1" depth="0.2" height="0.4" width="1.4" color="#ffd700" class="clickable">
        <a-text value="Need Training?" align="center" color="#232526" position="0 0 0.15" width="2"></a-text>
      </a-box>
      <a-box id="q1" position="-2 1.2 -1.5" depth="0.2" height="0.5" width="1.2" color="#7b2ff2" class="clickable" event-set__enter="scale: 1.1 1.1 1.1" event-set__leave="scale: 1 1 1">
        <a-text value="Start Interview" align="center" color="#fff" position="0 0 0.15" width="2"></a-text>
      </a-box>
      <a-box id="q2" position="2 1.2 -1.5" depth="0.2" height="0.5" width="1.2" color="#bba6f7" class="clickable" event-set__enter="scale: 1.1 1.1 1.1" event-set__leave="scale: 1 1 1">
        <a-text value="Next Question" align="center" color="#232526" position="0 0 0.15" width="2"></a-text>
      </a-box>
      <!-- Question Display Panel -->
      <a-entity id="question-panel">
        <a-text id="welcome-text" value="Welcome! Ready for your mock interview?\nType your answer below or use the command bar!" align="center" color="#7b2ff2" position="0 2.3 -1.5" width="5"></a-text>
        <a-text id="question-text" value="" align="center" color="#232526" position="0 1.7 -1.5" width="4"></a-text>
        <a-text id="timer-text" value="" align="center" color="#7b2ff2" position="0 2.1 -1.5" width="2"></a-text>
        <a-entity id="feedback-container" position="0 3.1 -2.5">
          <a-plane color="#222" width="5.5" height="0.7" opacity="0.85" position="0 0 0"></a-plane>
          <a-text id="feedback-text" value="" align="center" color="#ffe066" position="0 0 0.01" width="5.2" wrap-count="36" baseline="center" font-weight="bold" font="https://cdn.aframe.io/fonts/Exo2Bold.fnt" side="double" shader="msdf"></a-text>
        </a-entity>
        <a-text id="training-text" value="" align="center" color="#7b2ff2" position="0 0.9 -1.5" width="4"></a-text>
    </a-scene>
      <!-- Command Input Bar -->
        <!-- User Answer Input Bar -->
        <div id="answer-bar" style="position:fixed;bottom:70px;left:50%;transform:translateX(-50%);z-index:10;background:rgba(255,255,255,0.95);border-radius:8px;padding:8px 16px;box-shadow:0 2px 8px #7b2ff222;display:flex;gap:8px;align-items:center;">
          <input id="answer-input" type="text" placeholder="Type your answer here..." style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:320px;" />
          <button onclick="submitAnswer()">Submit</button>
          <span id="answer-feedback" style="color:#7b2ff2;font-size:1rem;margin-left:12px;"></span>
        </div>
      <div id="command-bar" style="position:fixed;bottom:24px;left:50%;transform:translateX(-50%);z-index:10;background:rgba(255,255,255,0.95);border-radius:8px;padding:8px 16px;box-shadow:0 2px 8px #7b2ff222;display:flex;gap:8px;align-items:center;">
        <input id="command-input" type="text" placeholder="Type a command (e.g. start, next, training, help)" style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:260px;" />
        <button onclick="handleCommand()">Send</button>
        <span id="command-feedback" style="color:#7b2ff2;font-size:1rem;margin-left:12px;"></span>
      </div>

  </body>
  <!-- Move all scripts here for clarity and to prevent code from showing in the scene -->
  <script>
    // Command bar logic
    function handleCommand() {
      const input = document.getElementById('command-input');
      const feedback = document.getElementById('command-feedback');
      if (!input || !feedback) return;
      const cmd = input.value.trim().toLowerCase();
      input.value = '';
      feedback.textContent = '';
      if (!cmd) return;
      if (cmd === 'start' || cmd === 'start interview' || cmd === 'yes' || cmd === 'ready') {
        window.startInterview();
        feedback.textContent = 'Interview started!';
      } else if (cmd === 'next' || cmd === 'next question') {
        window.nextQuestion();
        feedback.textContent = 'Next question.';
      } else if (cmd === 'training' || cmd === 'need training') {
        window.showTraining();
        feedback.textContent = 'Training tip shown.';
      } else if (cmd === 'help') {
        feedback.textContent = 'Commands: start, next, training, help';
      } else {
        feedback.textContent = 'Unknown command.';
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      const input = document.getElementById('command-input');
      if (input) {
        input.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') handleCommand();
        });
      }
    });
  </script>
  <script>
    // Zoom-style bot interview logic
    document.addEventListener('DOMContentLoaded', function() {
      const joinBtn = document.getElementById('join-btn');
      const muteBtn = document.getElementById('mute-btn');
      const endBtn = document.getElementById('end-btn');
      const botBubble = document.getElementById('bot-chat-bubble');
      let interviewStarted = false;
      let muted = false;
      let interviewStep = 0;
      const questions = [
        {
          text: "Why should we hire you?",
          options: [
            "I am passionate and have the skills you need.",
            "I am looking for any job right now.",
            "I want to learn and grow in this role.",
            "I am not sure."
          ]
        },
        {
          text: "Tell me about a time you worked in a team.",
          options: [
            "I collaborated on a project and helped solve problems.",
            "I prefer working alone.",
            "I have not worked in a team before.",
            "I don't remember."
          ]
        },
        {
          text: "How do you handle stress or pressure?",
          options: [
            "I stay organized and focus on solutions.",
            "I get overwhelmed easily.",
            "I ask for help when needed.",
            "I avoid stressful situations."
          ]
        },
        {
          text: "What motivates you?",
          options: [
            "Achieving goals and learning new things.",
            "Getting paid.",
            "Working with others.",
            "I am not sure."
          ]
        },
        {
          text: "Do you have any questions for us?",
          options: [
            "What does success look like in this role?",
            "No, I don't have any questions.",
            "Can I work remotely?",
            "How much vacation do I get?"
          ]
        }
      ];
      function botSay(msg) {
        botBubble.textContent = msg;
        if (!muted && 'speechSynthesis' in window) {
          const utter = new window.SpeechSynthesisUtterance(msg);
          utter.rate = 1.05;
          utter.pitch = 1.1;
          window.speechSynthesis.speak(utter);
        }
      }
      if (joinBtn) joinBtn.onclick = function() {
        interviewStarted = true;
        interviewStep = 0;
        showQuestionWithOptions();
      };
      if (muteBtn) muteBtn.onclick = function() {
        muted = !muted;
        muteBtn.textContent = muted ? "Unmute" : "Mute";
      };
      if (endBtn) endBtn.onclick = function() {
        interviewStarted = false;
        botSay("Interview ended. Thank you for participating!");
      };
      window.submitAnswer = function() {
        if (!interviewStarted) return botSay("Please join the interview first.");
        const selected = document.querySelector('input[name="mc-answer"]:checked');
        if (!selected) return botSay("Please select an answer.");
        const answer = selected.value;
        let feedback = '';
        let score = 0;
        if (selected.dataset.correct === "true") {
          feedback = 'Great choice!';
          score = 1;
        } else {
          feedback = 'Consider a more thoughtful answer next time.';
        }
        botSay(`Thank you for your answer!\n${feedback}`);
        interviewStep++;
        if (interviewStep < questions.length) {
          setTimeout(() => showQuestionWithOptions(), 1800);
        } else {
          setTimeout(() => botSay("Interview complete! Well done."), 1800);
        }
      };
      function showQuestionWithOptions() {
        const q = questions[interviewStep];
        let html = `<strong>${q.text}</strong><br/><form id='mc-form' style='margin-top:12px;'>`;
        q.options.forEach((opt, idx) => {
          html += `<label style='display:block;margin-bottom:8px;'><input type='radio' name='mc-answer' value='${opt.replace(/'/g, "&apos;")}' data-correct='${idx===0}' /> ${opt}</label>`;
        });
        html += `</form>`;
        botBubble.innerHTML = html;
      }
    });
  </script>
</html>
