<!-- Simple A-Frame VR Interview Room Example -->
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <title>Mock Interview VR Room</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="margin:0;">
    <style>
      body {
        margin: 0;
        min-height: 100vh;
        background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80') no-repeat center center fixed;
        background-size: cover;
      }
      #zoom-overlay {
        /* Keep overlay readable over background */
        backdrop-filter: blur(2px);
      }
    </style>
    <!-- Centered Mr. Nanny and Interview UI -->
    <div id="interview-room" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100;display:flex;justify-content:center;align-items:center;">
      <div style="background:rgba(0,0,0,0.85);border-radius:16px;padding:24px 40px;box-shadow:0 2px 16px #23252655;display:flex;flex-direction:column;align-items:center;min-width:340px;max-width:480px;">
        <img src="/Mr%20Nanny.png" alt="Bot Avatar" style="width:72px;height:72px;border-radius:50%;border:2px solid #ffd700;box-shadow:0 2px 8px #ffd70044;margin-bottom:12px;" />
        <span style="color:#ffd700;font-size:1.3rem;font-weight:700;margin-bottom:18px;">Mr. Nanny (AI Interviewer)</span>
        <div id="bot-chat-bubble" style="background:#fffbe6;color:#232526;border-radius:12px;padding:14px 22px;font-size:1.12rem;box-shadow:0 2px 8px #ffd70022;margin-bottom:16px;min-height:48px;max-width:340px;text-align:left;">Welcome to your live mock interview! Ready to begin?</div>
        <div style="display:flex;gap:14px;justify-content:center;margin-bottom:12px;">
          <button id="join-btn" style="background:#ffd700;color:#232526;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #ffd70044;cursor:pointer;">Join Interview</button>
          <button id="end-btn" style="background:#7b2ff2;color:#fff;font-weight:700;border-radius:8px;padding:8px 18px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;">End</button>
        </div>
        <div id="answer-bar" style="width:100%;display:flex;gap:8px;align-items:center;margin-bottom:8px;">
          <input id="answer-input" type="text" placeholder="Type your answer here..." style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:220px;" />
          <button id="submit-btn" style="background:#7b2ff2;color:#fff;font-weight:700;border-radius:8px;padding:8px 16px;font-size:1rem;border:none;box-shadow:0 2px 8px #7b2ff244;cursor:pointer;">Submit</button>
        </div>
        <span id="answer-feedback" style="color:#ffd700;font-size:1rem;margin-top:4px;"></span>
      </div>
      <!-- Sidebar for programmable questions -->
      <div id="question-sidebar" style="background:rgba(255,255,255,0.92);border-radius:16px;padding:18px 22px;box-shadow:0 2px 12px #23252622;min-width:260px;max-width:320px;margin-left:32px;display:flex;flex-direction:column;align-items:flex-start;">
        <h3 style="color:#7b2ff2;margin-bottom:10px;font-size:1.1rem;">Interview Questions</h3>
        <ul id="question-list" style="list-style:none;padding:0;margin:0 0 10px 0;font-size:1rem;color:#232526;"></ul>
        <textarea id="question-editor" style="width:100%;height:60px;border-radius:8px;border:1px solid #7b2ff2;margin-bottom:8px;padding:6px 8px;font-size:1rem;" placeholder="Add or edit questions, one per line..."></textarea>
        <button id="save-questions-btn" style="background:#ffd700;color:#232526;font-weight:700;border-radius:8px;padding:6px 14px;font-size:1rem;border:none;box-shadow:0 2px 8px #ffd70044;cursor:pointer;">Save Questions</button>
      </div>
    </div>
      <!-- Command Input Bar -->
        <!-- User Answer Input Bar -->
        <div id="answer-bar" style="position:fixed;bottom:70px;left:50%;transform:translateX(-50%);z-index:10;background:rgba(255,255,255,0.95);border-radius:8px;padding:8px 16px;box-shadow:0 2px 8px #7b2ff222;display:flex;gap:8px;align-items:center;">
          <input id="answer-input" type="text" placeholder="Type your answer here..." style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:320px;" />
          <button onclick="submitAnswer()">Submit</button>
          <span id="answer-feedback" style="color:#7b2ff2;font-size:1rem;margin-left:12px;"></span>
        </div>
      <div id="command-bar" style="position:fixed;bottom:24px;left:50%;transform:translateX(-50%);z-index:10;background:rgba(255,255,255,0.95);border-radius:8px;padding:8px 16px;box-shadow:0 2px 8px #7b2ff222;display:flex;gap:8px;align-items:center;">
        <input id="command-input" type="text" placeholder="Type a command (e.g. start, next, training, help)" style="font-size:1.1rem;padding:6px 10px;border-radius:6px;border:1.5px solid #7b2ff2;width:260px;" />
        <button onclick="handleCommand()">Send</button>
        <span id="command-feedback" style="color:#7b2ff2;font-size:1rem;margin-left:12px;"></span>
      </div>

  </body>
  <!-- Move all scripts here for clarity and to prevent code from showing in the scene -->
  <script>
    // Command bar logic
    function handleCommand() {
      const input = document.getElementById('command-input');
      const feedback = document.getElementById('command-feedback');
      if (!input || !feedback) return;
      const cmd = input.value.trim().toLowerCase();
      input.value = '';
      feedback.textContent = '';
      if (!cmd) return;
      if (cmd === 'start' || cmd === 'start interview' || cmd === 'yes' || cmd === 'ready') {
        window.startInterview();
        feedback.textContent = 'Interview started!';
      } else if (cmd === 'next' || cmd === 'next question') {
        window.nextQuestion();
        feedback.textContent = 'Next question.';
      } else if (cmd === 'training' || cmd === 'need training') {
        window.showTraining();
        feedback.textContent = 'Training tip shown.';
      } else if (cmd === 'help') {
        feedback.textContent = 'Commands: start, next, training, help';
      } else {
        feedback.textContent = 'Unknown command.';
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      const input = document.getElementById('command-input');
      if (input) {
        input.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') handleCommand();
        });
      }
    });
  </script>
  <script>
    // Fill-in-the-blank interview logic with programmable questions
    document.addEventListener('DOMContentLoaded', function() {
      const joinBtn = document.getElementById('join-btn');
      const endBtn = document.getElementById('end-btn');
      const botBubble = document.getElementById('bot-chat-bubble');
      const answerInput = document.getElementById('answer-input');
      const submitBtn = document.getElementById('submit-btn');
      const answerFeedback = document.getElementById('answer-feedback');
      const questionList = document.getElementById('question-list');
      const questionEditor = document.getElementById('question-editor');
      const saveQuestionsBtn = document.getElementById('save-questions-btn');
      let interviewStarted = false;
      let interviewStep = 0;
      let userAnswers = [];
      // Default questions
      let questions = [
        "Why should we hire you?",
        "Tell me about a time you worked in a team.",
        "How do you handle stress or pressure?",
        "What motivates you?",
        "Do you have any questions for us?"
      ];
      function renderQuestionList() {
        questionList.innerHTML = '';
        questions.forEach((q, idx) => {
          const li = document.createElement('li');
          li.textContent = `${idx+1}. ${q}`;
          questionList.appendChild(li);
        });
        questionEditor.value = questions.join('\n');
      }
      renderQuestionList();
      saveQuestionsBtn.onclick = function() {
        const lines = questionEditor.value.split(/\r?\n/).map(l => l.trim()).filter(l => l);
        if (lines.length) {
          questions = lines;
          renderQuestionList();
        }
      };
      function botSay(msg) {
        botBubble.textContent = msg;
        if ('speechSynthesis' in window) {
          const utter = new window.SpeechSynthesisUtterance(msg);
          utter.rate = 1.05;
          utter.pitch = 1.1;
          window.speechSynthesis.speak(utter);
        }
      }
      if (joinBtn) joinBtn.onclick = function() {
        interviewStarted = true;
        interviewStep = 0;
        userAnswers = [];
        botSay(questions[interviewStep]);
        answerInput.value = '';
        answerFeedback.textContent = '';
      };
      if (endBtn) endBtn.onclick = function() {
        interviewStarted = false;
        botSay("Interview ended. Thank you for participating!");
        answerFeedback.textContent = '';
      };
      function submitAnswer() {
        if (!interviewStarted) {
          answerFeedback.textContent = 'Please start the interview.';
          return;
        }
        const answer = answerInput.value.trim();
        if (!answer) {
          answerFeedback.textContent = 'Please type an answer.';
          return;
        }
        userAnswers[interviewStep] = answer;
        answerFeedback.textContent = 'Answer saved.';
        answerInput.value = '';
        interviewStep++;
        if (interviewStep < questions.length) {
          setTimeout(() => {
            botSay(questions[interviewStep]);
            answerFeedback.textContent = '';
          }, 1200);
        } else {
          setTimeout(() => {
            botSay("Interview complete! Well done.");
            answerFeedback.textContent = '';
          }, 1200);
        }
      }
      submitBtn.onclick = submitAnswer;
      answerInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') submitAnswer();
      });
    });
  </script>
</html>
